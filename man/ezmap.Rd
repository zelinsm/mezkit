% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ezmap.R
\name{ezmap}
\alias{ezmap}
\title{Recode Variables in a Data Frame Using Codebook Mapping}
\arguments{
\item{raw_df}{A data frame containing raw data to be recoded. Column names must match the \code{variable} names in the codebook.}

\item{dd}{A cleaned codebook data frame containing at least the columns \code{variable} and \code{levels_mapped}. \code{levels_mapped} must contain valid R character strings like \verb{"1" = "Yes", "0" = "No"}, which can be evaluated into named vectors.}
}
\value{
A data frame with the same structure as \code{raw_df}, but with applicable variables converted to labeled factors.
}
\description{
Safely recodes variables in a raw dataset based on the \code{levels_mapped} column of a cleaned codebook (e.g., from REDCap). This function evaluates the character strings in \code{levels_mapped}, converts them to named character vectors, and uses them to map raw values to labeled factors. It ensures mappings are safe by checking for complete coverage and preventing overwriting data with \code{NA}s.
}
\details{
\itemize{
\item Only rows in the codebook where \code{levels_mapped} is non-missing and \code{variable} is present in \code{raw_df} are considered.
\item Variables are skipped if:
\itemize{
\item The \code{levels_mapped} string cannot be parsed
\item The mapping does not cover all non-missing values in the raw column
\item The recoding would result in complete loss of information (all values become \code{NA})
}
}
}
\section{Logging}{

For each variable:
\itemize{
\item ✅ A message is printed for each successful mapping
\item ⚠️ A warning is issued for skipped mappings due to incomplete coverage
\item ❌ A warning is issued if a mapping is malformed or causes data loss
\item A summary of all mapped, skipped, and failed variables is printed at the end
}
}

\examples{
# Assume dd is a cleaned codebook created by zap_dd()
# Assume raw_df contains columns listed in dd$variable
mapped_df <- ezmap(raw_df, dd)

}
